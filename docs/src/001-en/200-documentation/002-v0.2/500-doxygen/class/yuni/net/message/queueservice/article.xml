<title>QueueService</title>
<pragma:weight value="0.5" />
<pragma:toc visible="false" />
<tag name="doxygen" />
<tag name="dox:class" />



<h2>QueueService</h2>
<h3>Public typedef</h3>
<div class="doxygen_brief"><table class="nostyle"><tr><td></td><td><h4></h4></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">ThreadingPolicy</a></span> : Policy::ObjectLevelLockable&lt;QueueService&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnStarting</a></span> : Event&lt;void( Error&amp;)&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnStarted</a></span> : Event&lt;void()&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnStopping</a></span> : Event&lt;void()&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnStopped</a></span> : Event&lt;void()&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnError</a></span> : Event&lt;void( State, Error )&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnClientAccept</a></span> : Event&lt;void(bool&amp;, const String&amp;, Port, const String&amp;, Port )&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnClientConnected</a></span> : Event&lt;void(const IConnection::Ptr&amp;)&gt;</code></td></tr>
<tr><td class="doxygen_index"><code><span class="keyword">typedef</span></code></td><td class="doxygen_index_def"><code><span class="method"><a href="#">OnClientDisconnected</a></span> : Event&lt;void(const IConnection::Ptr&amp;)&gt;</code></td></tr>
</table></div>

<h3>Public function</h3>
<div class="doxygen_brief"><table class="nostyle"><tr><td></td><td><h4>Constructor &amp; Destructor</h4></td></tr>
<tr><td class="doxygen_index"><code> </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">QueueService</a></span>()</code></td></tr>
<tr><td class="doxygen_index"><code> </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#"><b> ~ </b>QueueService</a></span>()</code></td></tr>
<tr><td></td><td><br /><h4>Addresses management</h4></td></tr>
<tr><td class="doxygen_index"><code>Error </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">listen</a></span>(const StringAdapter&amp; address, const Port&amp; port, TransportLayer transport)</code></td></tr>
<tr><td class="doxygen_index"><code>Error </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">listen</a></span>(const StringAdapter&amp; address, const Port&amp; port, Transport::ITransport::Ptr transport)</code></td></tr>
<tr><td class="doxygen_index"><code>void </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">clear</a></span>()</code></td></tr>
<tr><td></td><td><br /><h4>Service management</h4></td></tr>
<tr><td class="doxygen_index"><code>Error </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">start</a></span>()</code></td></tr>
<tr><td class="doxygen_index"><code>Error </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">stop</a></span>()</code></td></tr>
<tr><td></td><td><br /><h4>Messages</h4></td></tr>
<tr><td class="doxygen_index"><code>Error </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">sendAll</a></span>(const StringT&amp; buffer)</code></td></tr>
<tr><td class="doxygen_index"><code>Error </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">sendAll</a></span>(const char*const buffer, unsigned int length)</code></td></tr>
<tr><td class="doxygen_index"><code>unsigned int </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">messageMaxSize</a></span>() <span class="keyword">const</span></code></td></tr>
<tr><td class="doxygen_index"><code>bool </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">messageMaxSize</a></span>(unsigned int size)</code></td></tr>
<tr><td></td><td><br /><h4>Events</h4></td></tr>
<tr><td class="doxygen_index"><code>OnClientAccept </code></td><td class="doxygen_index_def"><code> <span class="method"><a href="#">onClientAccept</a></span>()</code></td></tr>
</table></div>

<h2>Detailed Description</h2><table class="doxygen_table">
<tr><td class="doxnone"></td><td class="doxnone"><h3 class="doxygen_section">Public <code class="doxygen_visibility">Public</code></h3>
</td></tr>
<tr><td class="doxygen_enum"></td><td class="doxnone"><div class="doxygen_brief">Different states of a queue service.<br /><div class="doxygen_name_spacer"></div>
<code><i>(unmanaged tag: 4)</i></code>
</div></td></tr><tr id="StatestStoppedstStartingstRunningstStopping_26731319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">The threading policy.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ ThreadingPolicy</a></span>: <span class="keyword">typedef</span> Policy::ObjectLevelLockable&lt;QueueService&gt;;
</code>
</div></td></tr><tr id="ThreadingPolicy_26751319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: The queue service is starting.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnStarting</a></span>: <span class="keyword">typedef</span> Event&lt;void( Error&amp;)&gt;;
</code>
</div></td></tr><tr id="OnStarting_26781319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: The queue service has started.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnStarted</a></span>: <span class="keyword">typedef</span> Event&lt;void()&gt;;
</code>
</div></td></tr><tr id="OnStarted_26801319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: The queue service is stopping.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnStopping</a></span>: <span class="keyword">typedef</span> Event&lt;void()&gt;;
</code>
</div></td></tr><tr id="OnStopping_26821319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: The queue service has been stopped.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnStopped</a></span>: <span class="keyword">typedef</span> Event&lt;void()&gt;;
</code>
</div></td></tr><tr id="OnStopped_26841319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: An error has occured.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnError</a></span>: <span class="keyword">typedef</span> Event&lt;void( State, Error )&gt;;
</code>
</div></td></tr><tr id="OnError_26851319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: accepting a client.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnClientAccept</a></span>: <span class="keyword">typedef</span> Event&lt;void(bool&amp;, const String&amp;, Port, const String&amp;, Port )&gt;;
</code>
</div></td></tr><tr id="OnClientAccept_26881319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: A client has connected.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnClientConnected</a></span>: <span class="keyword">typedef</span> Event&lt;void(const IConnection::Ptr&amp;)&gt;;
</code>
</div></td></tr><tr id="OnClientConnected_26901319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_typedef"></td><td class="doxnone"><div class="doxygen_brief">Prototype event: A client has disconnected.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ OnClientDisconnected</a></span>: <span class="keyword">typedef</span> Event&lt;void(const IConnection::Ptr&amp;)&gt;;
</code>
</div></td></tr><tr id="OnClientDisconnected_26921319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_enum"></td><td class="doxnone"><div class="doxygen_brief">Get if this policy is thread-safe.<br /><div class="doxygen_name_spacer"></div>
<code><i>(unmanaged tag: 4)</i></code>
</div></td></tr><tr id="@369_26941319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxnone"></td><td class="doxnone"><h3 class="doxygen_section">Constructor &amp; Destructor <code class="doxygen_visibility">Public</code></h3>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Default constructor.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ QueueService</a></span>:  ();
</code>
</div></td></tr><tr id="QueueService_26951319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Destructor.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ <b> ~ </b>QueueService</a></span>:  ();
</code>
</div></td></tr><tr id="~QueueService_26971319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxnone"></td><td class="doxnone"><h3 class="doxygen_section">Addresses management <code class="doxygen_visibility">Public</code></h3>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief"><code> <span class="method"><a href="#">+ listen</a></span>: Error (const StringAdapter&amp; address, const Port&amp; port, TransportLayer transport);
</code>
</div></td></tr><tr id="listen_26991319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">This action will be effective the next time the server starts<source type="cpp">  Net::Message::QueueService   server;
  server.listen( "::1" ,  4242);
  server.listen( "82.125.10.31" ,  4242);
  server.start();
</source>
<br />
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Add a new address where the server should listen for incoming connections.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ listen</a></span>: Error (const StringAdapter&amp; address, const Port&amp; port, Transport::ITransport::Ptr transport);
</code>
</div></td></tr><tr id="listen_27021319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">This action will be effective the next time the server starts<source type="cpp">  Net::Message::QueueService   server;
  server.listen( "::1" ,  4242);
  server.listen( "82.125.10.31" ,  4242);
  server.start();
</source>
<br />
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Clear all addresses where the server should listen for incoming connections.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ clear</a></span>: void ();
</code>
</div></td></tr><tr id="clear_27051319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">This action will be effective the next time the server starts<br />
</div>
</td></tr>
<tr><td class="doxnone"></td><td class="doxnone"><h3 class="doxygen_section">Service management <code class="doxygen_visibility">Public</code></h3>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Try to start the queue service.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ start</a></span>: Error ();
</code>
</div></td></tr><tr id="start_27071319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Stop the server.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ stop</a></span>: Error ();
</code>
</div></td></tr><tr id="stop_27091319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxnone"></td><td class="doxnone"><h3 class="doxygen_section">Messages <code class="doxygen_visibility">Public</code></h3>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Send a message to all peers.<br /><div class="doxygen_name_spacer"></div>
<code><div class="doxygen_tmpllist" id="sendAll_27111319844517_tmpl"><span class="keyword">template</span>&lt;class StringT &gt;</div>
 <span class="method"><a href="#">+ sendAll</a></span>: Error (const StringT&amp; buffer);
</code>
</div></td></tr><tr id="sendAll_27111319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Send a raw buffer as message to all peers.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ sendAll</a></span>: Error (const char*const buffer, unsigned int length);
</code>
</div></td></tr><tr id="sendAll_27131319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Get the maximum size (in bytes) of a message.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ messageMaxSize</a></span>: unsigned int () <span class="keyword">const</span>;
</code>
</div></td></tr><tr id="messageMaxSize_27151319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Set the maximum size (in bytes, &gt; 0) of a message.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ messageMaxSize</a></span>: bool (unsigned int size);
</code>
</div></td></tr><tr id="messageMaxSize_27171319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxnone"></td><td class="doxnone"><h3 class="doxygen_section">Events <code class="doxygen_visibility">Public</code></h3>
</td></tr>
<tr><td class="doxygen_var"></td><td class="doxnone"><div class="doxygen_brief">Event : The queue service is starting.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ onStarting</a></span>: OnStarting;</code>
</div></td></tr><tr id="onStarting_27191319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_var"></td><td class="doxnone"><div class="doxygen_brief">Event : The queue service has started and is ready for incoming connections.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ onStarted</a></span>: OnStarted;</code>
</div></td></tr><tr id="onStarted_27201319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_var"></td><td class="doxnone"><div class="doxygen_brief">Event : The queue service is shutting down.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ onStopping</a></span>: OnStopping;</code>
</div></td></tr><tr id="onStopping_27221319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_var"></td><td class="doxnone"><div class="doxygen_brief">Event : The queue service is stopped.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ onStopped</a></span>: OnStopped;</code>
</div></td></tr><tr id="onStopped_27241319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_var"></td><td class="doxnone"><div class="doxygen_brief">Event : The queue service has encountered an error.<br /><div class="doxygen_name_spacer"></div>
<code><span class="method"><a href="#">+ onError</a></span>: OnError;</code>
</div></td></tr><tr id="onError_27251319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
<tr><td class="doxygen_fun"></td><td class="doxnone"><div class="doxygen_brief">Event : A client try to connect to the server.<br /><div class="doxygen_name_spacer"></div>
<code> <span class="method"><a href="#">+ onClientAccept</a></span>: OnClientAccept ();
</code>
</div></td></tr><tr id="onClientAccept_27271319844517_desc"><td class="doxnone doxreturn"></td><td class="doxnone">
<div class="doxygen_name_spacer"></div>
<div class="doxygen_desc">
</div>
</td></tr>
</table>


